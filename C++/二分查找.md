# 二分查找

![img](https://pic.leetcode-cn.com/1608987694-SdbAKo-file_1608987694450)



## 一、完全有序

### 二分查找

LeeTcode 35 搜索插入位置（简单）

给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。

你可以假设数组中无重复元素。

示例 1:

输入: [1,3,5,6], 5
输出: 2
示例 2:

输入: [1,3,5,6], 2
输出: 1

```
//递归法
class Solution {
private:
    int findeage(vector<int>& nums, int target,const int& l,const int& r){
        if(nums[l]>target)
            return l;
        if(nums[r]<target)
            return r+1;
        int mid=(l+r)/2;
        if(nums[mid]>target){
            return findeage(nums,target,l,mid-1);
        }
        else if(nums[mid]<target)
        return findeage(nums,target,mid+1,r);
        else 
        return mid;
    }
public:
    int searchInsert(vector<int>& nums, int target) {
        return findeage(nums,target,0,nums.size()-1);

    }
};
```

```
//迭代法
class Solution {
public:
    int searchInsert(vector<int>& nums, int target) {
        int n=nums.size();
        if(!n)return 0;
        if(n==1)return nums[0]>=target?0:1;
        int l=0,r=n-1;
        while(l<=r){
            if(target<=nums[l])return l;
            if(target>nums[r])return r+1;
            int mid=l+(r-l)/2;
            if(nums[mid]==target)return mid;
            if(nums[mid]<target){
                l=mid+1;
            }
            else{
                r=mid-1;
            }
        }
        return l;
    }
};
```

解题思路：

二分查找尽量用【】双闭的方式，不用（】的左闭右开的形式
这样的结束条件为【left+1,left】 完全找完
由于是闭区间，所以r=mid+1;l=mid-1;



### 查找第一个元素



## 二、不完全有序



## 三、二维数组





### 二分查找的三种题型

*在一个数组里查找一个数，简称为「二分下标」；
*查找一个有范围的整数，简称为「二分答案」，这部分题目还挺常见；
*通过一个变量与另一个变量的相关关系，进而确定目标变量的值，统称为「复杂问题」，通常这一类问题的判别函数需要遍历整个数组。

题型一：在数组中查找符合条件的元素的下标
一般而言这个数组是有序的，也可能是半有序的（旋转有序数组或者山脉数组）。

题目	提示与题解
704. 二分查找（简单）	二分查找的最原始问题，使用本题解介绍的方法就要注意，需要后处理。
34. 在排序数组中查找元素的第一个和最后一个位置（中等）	查找边界问题，题解（有视频讲解）。
33. 搜索旋转排序数组（中等）	题解，利用局部单调性，逐步缩小搜索区间（其它问题类似）。
81. 搜索旋转排序数组 II（中等）	题解
153. 寻找旋转排序数组中的最小值（中等）	题解
154. 寻找旋转排序数组中的最小值 II（中等）	题解
300. 最长上升子序列（中等）	特别经典的一道「动态规划」，二分查找的思路是基于「动态规划」的状态定义得到，代码很像第 35 题，题解。
275. H指数 II（中等）	题解 ，这个问题题目描述比较让人迷惑，可以跳过不做
852. 山脉数组的峰顶索引（简单）	利用局部单调性，逐步缩小搜索区间。
1095. 山脉数组中查找目标值（中等）	官方题解（有视频讲解），题解
4. 寻找两个有序数组的中位数（困难）	官方题解（有视频讲解），题解
658. 找到 K 个最接近的元素（中等）	题解，这个问题二分的写法需要做复杂的分类讨论，可以放在以后做。
题型二：在一个有范围的区间里搜索一个整数
定位一个有范围的整数，这件事情也叫「二分答案」或者叫「二分结果」。如果题目要求的是一个整数，这个整数有明确的范围，可以考虑使用二分查找。

题目	提示与题解
69. 平方根（简单）	题解，在一个整数范围里查找一个整数，也是二分查找法的应用场景。
287. 寻找重复数（中等）	题解，在一个整数范围里查找一个整数。这个问题二分查找的解法很反常规，知道即可。
374. 猜数字大小（简单）	题解
1300. 转变数组后最接近目标值的数组和	题解
题型三：复杂的二分查找问题（判别条件需要遍历数组）
「力扣」上还有这样一类问题：目标变量和另一个变量有相关关系（一般而言是线性关系），目标变量的性质不好推测，但是另一个变量的性质相对容易推测（满足某种意义上的单调性）。这样的问题的判别函数通常会写成一个函数的形式。

这一类问题可以统称为「 最大值极小化 」问题，最原始的问题场景是木棍切割问题，这道题的原始问题是「力扣」第 410 题。

解题的思路是这样的：

分析出题目要我们找一个整数，这个整数有范围，所以可以用二分查找；
分析出单调性，一般来说是一个变量 a 的值大了，另一个变量 b 的值就变小，而「另一个变量的值」 b 有限制，因此可以通过调整 a 的值达到控制 b 的效果；
这一类问题的题目条件一定会给出 连续、正整数 这样的关键字，如果没有，问题场景也一定蕴含了这两个关键信息。
以下给出的问题无一例外。

题目	提示与题解
410. 分割数组的最大值（困难）	题解
875. 爱吃香蕉的珂珂（中等）	题解
LCP 12. 小张刷题计划（中等）	（题解在第 410 题题解里）
1482. 制作 m 束花所需的最少天数（中等）	（题解在第 1300 题题解里）
1552. 两球之间的磁力（中等）	



